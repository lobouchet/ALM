(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4879:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(5155),a=s(2115),l=s(5317),d=s(6104),c=s(3568);function i(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)({title:"",description:"",date_debut:"",date_fin:""}),[o,n]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!d.j.currentUser)return;let e=(0,l.P)((0,l.rJ)(d.db,"tasks"),(0,l._M)("userId","==",d.j.currentUser.uid)),s=(0,l.aQ)(e,e=>{let s=e.docs.map(e=>{var t,s;return{id:e.id,...e.data(),date_debut:null===(t=e.data().date_debut)||void 0===t?void 0:t.toDate(),date_fin:null===(s=e.data().date_fin)||void 0===s?void 0:s.toDate()}});t(s),s.forEach(e=>{if(!e.complete&&e.date_fin){let t=e.date_fin.getTime()-new Date().getTime();t>0&&t<36e5&&(0,c.oR)('La t\xe2che "'.concat(e.title,'" expire bient\xf4t !'),{icon:"⚠️"})}})});return()=>s()},[]);let u=async e=>{if(e.preventDefault(),d.j.currentUser)try{await (0,l.gS)((0,l.rJ)(d.db,"tasks"),{...s,userId:d.j.currentUser.uid,complete:!1,date_debut:new Date(s.date_debut),date_fin:new Date(s.date_fin)}),i({title:"",description:"",date_debut:"",date_fin:""}),n(!1),c.oR.success("T\xe2che cr\xe9\xe9e avec succ\xe8s !")}catch(e){c.oR.error("Erreur lors de la cr\xe9ation de la t\xe2che"),console.error(e)}},m=async(e,t)=>{try{await (0,l.mZ)((0,l.H9)(d.db,"tasks",e),{complete:!t}),c.oR.success("T\xe2che marqu\xe9e comme ".concat(t?"en cours":"termin\xe9e"," !"))}catch(e){c.oR.error("Erreur lors de la mise \xe0 jour de la t\xe2che"),console.error(e)}},x=async e=>{try{await (0,l.kd)((0,l.H9)(d.db,"tasks",e)),c.oR.success("T\xe2che supprim\xe9e avec succ\xe8s !")}catch(e){c.oR.error("Erreur lors de la suppression de la t\xe2che"),console.error(e)}},h=e.filter(e=>!e.complete),b=e.filter(e=>e.complete);return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Mes t\xe2ches"}),(0,r.jsx)("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cr\xe9er une t\xe2che"})]}),o&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg p-6 rounded-lg w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Nouvelle t\xe2che"}),(0,r.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Titre"}),(0,r.jsx)("input",{type:"text",value:s.title,onChange:e=>i({...s,title:e.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white/10 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Description"}),(0,r.jsx)("textarea",{value:s.description,onChange:e=>i({...s,description:e.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white/10 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Date de d\xe9but"}),(0,r.jsx)("input",{type:"datetime-local",value:s.date_debut,onChange:e=>i({...s,date_debut:e.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white/10 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Date de fin"}),(0,r.jsx)("input",{type:"datetime-local",value:s.date_fin,onChange:e=>i({...s,date_fin:e.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white/10 text-white"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white",children:"Annuler"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cr\xe9er"})]})]})]})}),h.length>15&&(0,r.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-md p-4 text-yellow-500",children:"⚠️ Attention : Vous avez plus de 15 t\xe2ches en cours !"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"T\xe2ches en cours"}),(0,r.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-white",children:e.title}),(0,r.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:e.description}),(0,r.jsxs)("p",{className:"text-gray-400 text-xs mt-2",children:["Du ",e.date_debut.toLocaleString()," au ",e.date_fin.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>m(e.id,e.complete),className:"text-green-500 hover:text-green-400",children:"✓"}),(0,r.jsx)("button",{onClick:()=>x(e.id),className:"text-red-500 hover:text-red-400",children:"\xd7"})]})]})},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"T\xe2ches termin\xe9es"}),(0,r.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-4 opacity-75",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-white line-through",children:e.title}),(0,r.jsx)("p",{className:"text-gray-300 text-sm mt-1 line-through",children:e.description}),(0,r.jsxs)("p",{className:"text-gray-400 text-xs mt-2",children:["Du ",e.date_debut.toLocaleString()," au ",e.date_fin.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>m(e.id,e.complete),className:"text-yellow-500 hover:text-yellow-400",children:"↺"}),(0,r.jsx)("button",{onClick:()=>x(e.id),className:"text-red-500 hover:text-red-400",children:"\xd7"})]})]})},e.id))})]})]})]})}},6104:(e,t,s)=>{"use strict";s.d(t,{db:()=>i,j:()=>c});var r=s(3915),a=s(6203),l=s(5317);let d=0===(0,r.Dk)().length?(0,r.Wp)({apiKey:"AIzaSyC4qA5VI465J3-cPr5h0EoDguuw9DJMj58",authDomain:"to-scooby-do-b1b9c.firebaseapp.com",projectId:"to-scooby-do-b1b9c",storageBucket:"to-scooby-do-b1b9c.firebasestorage.app",messagingSenderId:"701517050880",appId:"1:701517050880:web:50d36404e82ccf20c654e5"}):(0,r.Dk)()[0],c=(0,a.xI)(d),i=(0,l.aU)(d)},6201:(e,t,s)=>{Promise.resolve().then(s.bind(s,4879))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,158,826,568,441,684,358],()=>t(6201)),_N_E=e.O()}]);