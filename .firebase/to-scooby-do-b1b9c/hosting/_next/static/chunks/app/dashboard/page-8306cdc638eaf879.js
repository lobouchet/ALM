(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4879:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(2115),c=s(5317),l=s(6104),i=s(3568);function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)({title:"",description:"",date_debut:"",date_fin:""}),[n,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!l.j.currentUser)return;let e=(0,c.P)((0,c.rJ)(l.db,"tasks"),(0,c._M)("userId","==",l.j.currentUser.uid)),s=(0,c.aQ)(e,e=>{let s=e.docs.map(e=>{var t,s;return{id:e.id,...e.data(),date_debut:null===(t=e.data().date_debut)||void 0===t?void 0:t.toDate(),date_fin:null===(s=e.data().date_fin)||void 0===s?void 0:s.toDate()}});t(s),s.forEach(e=>{if(!e.complete&&e.date_fin){let t=e.date_fin.getTime()-new Date().getTime();t>0&&t<36e5&&(0,i.oR)('La t\xe2che "'.concat(e.title,'" expire bient\xf4t !'),{icon:"⚠️"})}})});return()=>s()},[]);let x=async e=>{if(e.preventDefault(),l.j.currentUser)try{await (0,c.gS)((0,c.rJ)(l.db,"tasks"),{...s,userId:l.j.currentUser.uid,complete:!1,date_debut:new Date(s.date_debut),date_fin:new Date(s.date_fin)}),d({title:"",description:"",date_debut:"",date_fin:""}),o(!1),i.oR.success("T\xe2che cr\xe9\xe9e avec succ\xe8s !")}catch(e){i.oR.error("Erreur lors de la cr\xe9ation de la t\xe2che"),console.error(e)}},m=async(e,t)=>{try{await (0,c.mZ)((0,c.H9)(l.db,"tasks",e),{complete:!t}),i.oR.success("T\xe2che marqu\xe9e comme ".concat(t?"en cours":"termin\xe9e"," !"))}catch(e){i.oR.error("Erreur lors de la mise \xe0 jour de la t\xe2che"),console.error(e)}},u=async e=>{try{await (0,c.kd)((0,c.H9)(l.db,"tasks",e)),i.oR.success("T\xe2che supprim\xe9e avec succ\xe8s !")}catch(e){i.oR.error("Erreur lors de la suppression de la t\xe2che"),console.error(e)}},h=e.filter(e=>!e.complete),b=e.filter(e=>e.complete);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bebas text-orange-500",children:"MES T\xc2CHES"}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"btn",children:"Cr\xe9er une t\xe2che"})]}),n&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"card p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-xl font-bebas text-orange-500 mb-4",children:"NOUVELLE T\xc2CHE"}),(0,a.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Titre"}),(0,a.jsx)("input",{type:"text",value:s.title,onChange:e=>d({...s,title:e.target.value}),required:!0,className:"mt-1 block w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Description"}),(0,a.jsx)("textarea",{value:s.description,onChange:e=>d({...s,description:e.target.value}),required:!0,className:"mt-1 block w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Date de d\xe9but"}),(0,a.jsx)("input",{type:"datetime-local",value:s.date_debut,onChange:e=>d({...s,date_debut:e.target.value}),required:!0,className:"mt-1 block w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Date de fin"}),(0,a.jsx)("input",{type:"datetime-local",value:s.date_fin,onChange:e=>d({...s,date_fin:e.target.value}),required:!0,className:"mt-1 block w-full"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-orange-500",children:"Annuler"}),(0,a.jsx)("button",{type:"submit",className:"btn",children:"Cr\xe9er"})]})]})]})}),h.length>15&&(0,a.jsx)("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-md p-4 text-orange-500",children:"⚠️ Attention : Vous avez plus de 15 t\xe2ches en cours !"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bebas text-orange-500 mb-4",children:"T\xc2CHES EN COURS"}),(0,a.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,a.jsx)("div",{className:"card p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-white",children:e.title}),(0,a.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:e.description}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs mt-2",children:["Du ",e.date_debut.toLocaleString()," au ",e.date_fin.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>m(e.id,e.complete),className:"text-orange-500 hover:text-orange-400",children:"✓"}),(0,a.jsx)("button",{onClick:()=>u(e.id),className:"text-orange-500 hover:text-orange-400",children:"\xd7"})]})]})},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bebas text-orange-500 mb-4",children:"T\xc2CHES TERMIN\xc9ES"}),(0,a.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,a.jsx)("div",{className:"card p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-white line-through",children:e.title}),(0,a.jsx)("p",{className:"text-gray-300 text-sm mt-1 line-through",children:e.description}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs mt-2",children:["Du ",e.date_debut.toLocaleString()," au ",e.date_fin.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>m(e.id,e.complete),className:"text-orange-500 hover:text-orange-400",children:"✓"}),(0,a.jsx)("button",{onClick:()=>u(e.id),className:"text-orange-500 hover:text-orange-400",children:"\xd7"})]})]})},e.id))})]})]})]})}},6104:(e,t,s)=>{"use strict";s.d(t,{db:()=>d,j:()=>i});var a=s(3915),r=s(6203),c=s(5317);let l=0===(0,a.Dk)().length?(0,a.Wp)({apiKey:"AIzaSyC4qA5VI465J3-cPr5h0EoDguuw9DJMj58",authDomain:"to-scooby-do-b1b9c.firebaseapp.com",projectId:"to-scooby-do-b1b9c",storageBucket:"to-scooby-do-b1b9c.firebasestorage.app",messagingSenderId:"701517050880",appId:"1:701517050880:web:50d36404e82ccf20c654e5"}):(0,a.Dk)()[0],i=(0,r.xI)(l),d=(0,c.aU)(l)},6201:(e,t,s)=>{Promise.resolve().then(s.bind(s,4879))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,158,826,568,441,684,358],()=>t(6201)),_N_E=e.O()}]);